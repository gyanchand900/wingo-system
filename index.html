<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Wingo System</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#000;
  color:#fff;
}
h1{
  text-align:center;
  padding:10px;
}
.card{
  border:1px solid #333;
  margin:10px;
  padding:10px;
  border-radius:6px;
}
.row{
  display:flex;
  justify-content:space-between;
  margin:5px 0;
}
.big{color:#4da3ff}
.small{color:#ff9800}
.stable{color:#00ff7f}
.break{color:#ff3b3b}
table{
  width:100%;
  border-collapse:collapse;
}
th,td{
  border:1px solid #333;
  padding:6px;
  text-align:center;
}
thead{
  background:#111;
}
</style>
</head>

<body>

<h1>ðŸ“Š Wingo System</h1>

<div class="card">
  <div class="row"><span>Signal</span><span id="signal">-</span></div>
  <div class="row"><span>Strength</span><span id="strength">0%</span></div>
  <div class="row"><span>ðŸ”® Prediction</span><span id="prediction">WAIT</span></div>
</div>

<div class="card">
  <div class="row">
    <span>ðŸŽ¯ Accuracy</span>
    <span id="accuracy">0%</span>
  </div>
  <div class="row">
    <span class="big">ðŸŸ¦ Big Breaks</span>
    <span id="bigBreak">0</span>
  </div>
  <div class="row">
    <span class="small">ðŸŸ§ Small Breaks</span>
    <span id="smallBreak">0</span>
  </div>
</div>

<div class="card">
  <table>
    <thead>
      <tr>
        <th>Period</th>
        <th>Number</th>
        <th>BS</th>
      </tr>
    </thead>
    <tbody id="table"></tbody>
  </table>
</div>

<script>
/* ðŸ”´ CHANGE THIS */
const BACKEND_URL = "https://wingo-system.onrender.com";

function renderTable(list){
  const tb = document.getElementById("table");
  tb.innerHTML = "";
  list.forEach(r=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${r.period}</td>
      <td>${r.number}</td>
      <td class="${r.bs === "Big" ? "big" : "small"}">${r.bs}</td>
    `;
    tb.appendChild(tr);
  });
}

async function load(){
  try{
    const res = await fetch(BACKEND_URL + "/state");
    const d = await res.json();

    document.getElementById("signal").innerText = d.signal || "-";
    document.getElementById("prediction").innerText = d.prediction || "WAIT";
    document.getElementById("strength").innerText = (d.strength || 0) + "%";
    document.getElementById("accuracy").innerText = (d.accuracy || 0) + "%";

    document.getElementById("bigBreak").innerText =
      d.breakerSplit?.Big || 0;
    document.getElementById("smallBreak").innerText =
      d.breakerSplit?.Small || 0;

    renderTable(d.history || []);
  }catch(e){
    console.log("backend not ready");
  }
}

load();
setInterval(load,3000);
</script>

</body>
</html>
